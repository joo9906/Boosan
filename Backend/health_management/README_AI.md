# 건강 추천 AI 모델

혈압과 혈당 수치를 기반으로 개인화된 운동과 식단을 추천하는 AI 모델입니다.

## 📊 혈압/혈당 단계별 기준

### 혈압 단계 (수축기/이완기 mmHg)
| 단계 | 수축기 | 이완기 | 설명 |
|------|--------|--------|------|
| 저혈압 | < 90 | < 60 | 수분 넉넉히, 약간 짭짤하게 |
| 정상 | 90-119 | 60-79 | 저염·채소 듬뿍 식단 |
| 주의혈압 | 120-129 | < 80 | 소금 더 줄이기 (≤4g/일) |
| 고혈압전단계 | 130-139 | 80-89 | 체중 3% 줄이기 |
| 고혈압 | ≥ 140 | ≥ 90 | 소금 ≤3g/일 |

### 혈당 단계 (mg/dL)
| 단계 | 범위 | 설명 |
|------|------|------|
| 위험저혈당 | < 54 | 운동 중단, 단맛 음식 즉시 |
| 저혈당 | 54-69 | 규칙 3끼 + 과일·견과 간식 |
| 정상 | 70-100 | 현미밥, 생선, 두부 |
| 고혈당전단계 | 101-125 | 채소·과일 5번, 현미죽 저녁 소식 |
| 당뇨진단기준 | 126-179 | 밥 양 줄이고 채소·단백질 늘리기 |
| 심한고혈당 | ≥ 180 | 맑은 야채국, 통곡물 죽 |

## 🚀 사용법

### 1. 모델 테스트

```bash
cd Boosan/Backend/health_management
python health_recommend_model.py
```

### 2. Python에서 직접 사용

```python
from health_management.health_recommend_model import (
    get_health_recommendation_by_levels,
    get_health_recommendation_by_values
)

# 단계별로 추천 받기
result = get_health_recommendation_by_levels("정상", "고혈당전단계")
print(result)

# 실제 수치로 추천 받기
result = get_health_recommendation_by_values(125, 75, 110)
print(result)
```

## 🎯 추천 예시

### 입력 예시
```python
result = get_health_recommendation_by_levels("저혈압", "정상")
```

### 출력 예시
```json
{
    "추천_운동": "'가벼운 스트레칭'의 운동을 추천해요!",
    "추천_식단": "'소금 간을 조금 더 하기' 드시기를 추천드려요!!",
    "혈압_상태": "저혈압",
    "혈당_상태": "정상"
}
```

## 🎲 랜덤 추천 시스템

### 혈압별 운동 옵션
- **저혈압**: 느린 산책, 의자 체조·고무밴드, 가벼운 스트레칭, 천천히 걷기
- **정상**: 편안한 걷기, 밴드 근력, 가벼운 조깅, 자전거 타기
- **주의혈압**: 실내 자전거, 따뜻한 물속 체조, 천천히 걷기, 스트레칭
- **고혈압전단계**: 속도 바꿔 걷기, 천천히 요가, 수영, 가벼운 근력운동
- **고혈압**: 수영장 물속 걷기, 아령 운동, 천천히 걷기, 스트레칭

### 혈압별 식단 옵션
- **저혈압**: 수분 넉넉히 마시기, 된장국·멸치국, 세끼 챙겨 드시기, 소금 간 조금 더
- **정상**: 저염·채소 듬뿍, 채소·과일 4-5번, 현미·잡곡밥, 저지방 우유·요거트
- **주의혈압**: 소금 줄이기, 가공 햄·김치 국물 절제, 채소 중심, 저염 식단
- **고혈압전단계**: 채소·과일 6번, 올리브유, 생선 2회/주, 체중 3% 줄이기
- **고혈압**: 채소·과일 6번 이상, 올리브유 2큰술, 붉은 고기 월 2회만, 소금 ≤3g

### 혈당별 운동 옵션
- **위험저혈당**: 운동 중단, 사탕·주스, 휴식 취하기, 단맛 음식 섭취
- **저혈당**: 느린 스트레칭, 산책 10-15분, 가벼운 운동, 천천히 걷기
- **정상**: 속보 30분×5일, 밴드 근력, 조깅, 자전거 타기
- **고혈당전단계**: 따뜻한 물속 체조, 벽 짚고 스쿼트, 천천히 걷기, 스트레칭
- **당뇨진단기준**: 천천히 산책, 밴드 근력 3회, 가벼운 운동, 수영
- **심한고혈당**: 집 안 걷기, 가벼운 스트레칭, 휴식, 천천히 걷기

### 혈당별 식단 옵션
- **위험저혈당**: 단맛 음식 즉시, 통밀빵 + 치즈, 주스나 사탕, 꿀 한 스푼
- **저혈당**: 규칙 3끼 + 과일·견과, 통곡물 빵, 과일 섭취, 견과류 간식
- **정상**: 현미밥·생선·두부, 단 음료·과자 줄이기, 균형잡힌 식단, 채소 중심
- **고혈당전단계**: 채소·과일 5번, 콩·견과 자주, 현미죽 저녁 소식, 저탄수화물
- **당뇨진단기준**: 밥 양 줄이고 채소·단백질 늘리기, 설탕·과일즙 제한, 저탄수화물, 단백질 중심
- **심한고혈당**: 맑은 야채국, 통곡물 죽, 물 2L, 소금 조심

## 🧠 AI 모델 상세

### 모델 구조
- **알고리즘**: Random Forest Classifier
- **입력**: 혈압 단계, 혈당 단계 (범주형)
- **출력**: 운동 추천, 식단 추천
- **데이터**: 2,000개의 더미 데이터 샘플

### 추천 로직
1. **혈압 우선**: 혈압이 비정상이면 혈압 기준 추천
2. **혈당 우선**: 혈당이 비정상이면 혈당 기준 추천
3. **정상 조합**: 둘 다 정상이면 기본 건강 추천
4. **랜덤 선택**: 각 단계별 4가지 옵션 중 랜덤 선택

### 성능
- 운동 추천 정확도: ~25% (랜덤 선택으로 인해 낮아짐 - 정상)
- 식단 추천 정확도: ~22.5% (랜덤 선택으로 인해 낮아짐 - 정상)
- 학습 데이터: 1,600개 샘플
- 테스트 데이터: 400개 샘플

## 📁 파일 구조

```
health_management/
├── health_recommend_model.py    # AI 모델 클래스 및 함수 + 테스트 코드
└── README_AI.md                # 이 파일
```

## 🔧 개발자 정보

### 의존성
- pandas
- scikit-learn
- numpy
- random (Python 내장)

### 주요 함수
- `get_health_recommendation_by_levels(bp_level, glucose_level)`: 단계별 추천
- `get_health_recommendation_by_values(systolic, diastolic, glucose)`: 수치별 추천
- `train_health_model()`: 모델 재학습

### 확장 가능성
1. **실제 의료 데이터 연동**: 더 정확한 추천을 위해 실제 환자 데이터 사용
2. **개인화**: 사용자의 나이, 성별, 기존 질병 등 추가 고려
3. **실시간 모니터링**: IoT 기기와 연동하여 실시간 건강 데이터 수집
4. **의사 검토 시스템**: AI 추천에 대한 의사 검토 및 승인 시스템
5. **더 많은 추천 옵션**: 각 단계별 더 다양한 운동/식단 옵션 추가

## ⚠️ 주의사항

- 이 모델은 교육 목적으로 제작되었으며, 실제 의료 진단이나 치료에 사용하지 마세요.
- 모든 건강 관련 결정은 반드시 의료진과 상담 후 진행하세요.
- 모델의 추천은 참고용이며, 개인의 상황에 따라 다를 수 있습니다.
- 혈당이 250mg/dL 이상이고 케톤이 있으면 운동을 중단하고 의료진과 상담하세요.
- 매번 다른 추천이 나오는 것은 정상적인 랜덤 시스템입니다. 